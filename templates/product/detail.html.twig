{% extends 'base.html.twig' %}

{% block body %}
    <div class="bg-pink-100 min-h-screen">
        <!-- Navbar -->
        {% include 'partials/_navbar.html.twig' %}

        <!-- Header -->
        <header class="bg-pink-300 text-white text-center py-12">
            <h1 class="text-4xl font-bold">{{ product.designation }}</h1>
        </header>

        <!-- Section Produit -->
        <main class="container mx-auto px-6 py-12">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Image du produit -->
                <div class="flex justify-center">
                    <img src="{{ asset('uploads/' ~ product.imageFileName) }}" 
                         alt="{{ product.designation }}" 
                         class="w-full max-w-md h-auto object-cover rounded-lg shadow-lg">
                </div>

                <!-- Informations sur le produit -->
                <div class="bg-white p-6 shadow-lg rounded-lg">
                    <h2 class="text-2xl font-semibold text-pink-800">{{ product.designation }}</h2>
                    <p class="text-gray-600 mt-4">{{ product.description }}</p>
                    
                    <!-- Prix -->
                    <span class="text-pink-700 font-bold text-2xl mt-4 block">{{ product.price }} €</span>

                    <!-- Stock -->
                    {% if availableQty is not null and availableQty > 0 %}
                        <p class="text-green-600 font-semibold mt-2">En stock </p>
                    {% else %}
                        <p class="text-red-600 font-semibold mt-2">Rupture de stock</p>
                    {% endif %}

                    <!-- Sélection de la quantité -->
                    {% if availableQty > 0 %}
                    <form action=" {{ path('app_cart_add', {id: product.id} ) }}" method="post">
                        <input type="hidden" name="token" value="{{ csrf_token('add_cart') }}">
                        <div class="mt-6">
                            <label for="quantity" class="block text-gray-700 font-semibold">Quantité :</label>
                            <input type="number" id="quantity" min="1" max="{{ availableQty  }}" name="quantity" value="1"
                                   class="mt-2 p-2 border border-pink-400 rounded-lg w-20 focus:ring-2 focus:ring-pink-500">
                        </div>

                        <!-- Bouton Ajouter au Panier -->
                        <button type="submit" id="add-to-cart" 
                                class="mt-6 bg-pink-500 text-white px-6 py-3 rounded-full hover:bg-pink-600 transition">
                            Ajouter au panier
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </main>

        <!-- Footer -->
        {% include 'partials/_footer.html.twig' %}
    </div>

  
{% endblock %}
